# يوزر بوت Telethon + لوحة تحكم Aiogram لتنزيل/رفع يوتيوب

مشروع يجمع بين يوزر بوت (Telethon) للتنزيل والرفع و"لوحة تحكم" عبر بوت توكن (Aiogram) لتنفيذ الأوامر وإدارة الطوابير. يقوم بتنزيل فيديوهات YouTube عبر `yt-dlp` ورفعها إلى تيليجرام حتى 2GB، مع عرض تقدم التحميل والرفع، وفحص الحجم والتنظيف.

## المتطلبات
- Python 3.9+
- حساب تيليجرام (User) وليس بوت Bot لليوزر بوت
- توكن بوت BotFather (للوحة التحكم)
- `API_ID` و`API_HASH`: `https://my.telegram.org`
- `ffmpeg` على النظام

### تثبيت ffmpeg على أوبونتو/ديبيان
```bash
sudo apt-get update && sudo apt-get install -y ffmpeg
```

## الإعداد
```bash
cd yt_telethon_userbot
cp .env.example .env
# عدّل API_ID و API_HASH و BOT_TOKEN و ADMIN_USER_IDS
python3 -m pip install --break-system-packages -r requirements.txt
```

## التشغيل
```bash
python3 main.py
```
- أول تشغيل سيطلب تسجيل جلسة اليوزر بوت برقم الهاتف.
- بعد التشغيل، يمكنك التحكم عبر البوت:
  - `/yt <url> [--res 360|480|720|1080]` بدء تنزيل/رفع
  - تذهب الملفات افتراضيًا إلى `TARGET_PEER` (افتراضي `me`).

## استخدام اليوزر بوت مباشرة (اختياري)
أرسل من حسابك الشخصي رسالة صادرة:
```
.yt <url> [--res 360|480|720|1080]
```

## متغيرات البيئة الجديدة
- `BOT_TOKEN`: توكن بوت التيليجرام (لوحة التحكم)
- `ADMIN_USER_IDS`: قائمة IDs مسموح لها بإرسال الأوامر للوحة التحكم (مفصولة بفواصل)
- `TARGET_PEER`: الوجهة الافتراضية لرفع الفيديو من اليوزر بوت (`me` أو آيدي دردشة)
- `USE_UVLOOP`: لتحسين الأداء على لينكس (0/1)

## ملاحظات
- الحد الأقصى للحجم 2GB (قابل للتعديل). إن زاد الحجم سيتم الإيقاف مع اقتراح دقة أقل.
- تم تفضيل صيغة mp4/m4a ودمجها إلى mp4 لدعم البث داخل تيليجرام.
- التنزيلات تتم واحدة تلو الأخرى افتراضيًا؛ يمكن توسيعها لاحقًا عبر إعدادات الطابور.